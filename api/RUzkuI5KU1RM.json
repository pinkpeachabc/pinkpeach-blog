{"title":"EL与JSTL","date":"2020-03-08T13:18:24.000Z","date_formatted":{"ll":"2020年3月8日","L":"2020/03/08","MM-DD":"03-08"},"link":"EL与JSTL","comments":true,"tags":["EL","JSTL"],"categories":["JavaWeb"],"updated":"2020-07-18T13:08:53.737Z","content":"<p>经历过了 JSP，发现既能写 Html 又能写 Java 代码确实很方便，但是对于JSP 内部脚本的编写，却是很不友好😭 今天来介绍能够替代 JSP 页面中的脚本——EL 与 JSTL</p>\n<h2 id=\"el表达式\">EL表达式<a title=\"#el表达式\" href=\"#el表达式\"></a></h2>\n<p><strong>作用</strong></p>\n<blockquote>\n<p>EL最主要的作用是获得四大域中的数据</p>\n</blockquote>\n<p><strong>从四大域当中取数据</strong></p>\n<p>pageContext</p>\n<figure class=\"highlight jsp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$&#123;pageScope.key&#125;;</span><br></pre></td></tr></table></figure>\n<p>request</p>\n<figure class=\"highlight jsp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$&#123;requestScope.key&#125;</span><br></pre></td></tr></table></figure>\n<p>session</p>\n<figure class=\"highlight jsp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$&#123;sessionScope.key&#125;</span><br></pre></td></tr></table></figure>\n<p>application</p>\n<figure class=\"highlight jsp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$&#123;applicationScope.key&#125;</span><br></pre></td></tr></table></figure>\n<p><strong>简写</strong></p>\n<figure class=\"highlight jsp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$&#123;EL表达式&#125;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>EL 从四个域中获得某个值 ${key}，依次从 pageContext 域，request 域，session 域，application 域中，获取属性在某个域中获取后将不在向后寻找。</p>\n</blockquote>\n<p><strong>EL 内置 11 对象</strong></p>\n<p><em>pageScope</em><br>\n获取 JSP 中 pageScope 域中的数据</p>\n<p><em>requestScope</em><br>\n获取 JSP 中 requestScope 域中的数据</p>\n<p><em>sessionScope</em><br>\n获取 JSP 中 sessionScope 域中的数据</p>\n<p>applicationScope<br>\n获取 JSP 中 applicationScope 域中的数据</p>\n<p><em>param</em><br>\n<code>request.getParameter()</code></p>\n<p><em>paramValues</em><br>\n<code>rquest.getParameterValues()</code></p>\n<p><em>header</em><br>\n<code>request.getHeader(name)</code></p>\n<p><em>headerValues</em><br>\n<code>request.getHeaderValues()</code></p>\n<p><em>initParam</em><br>\n<code>this.getServletContext().getInitParameter(name)</code></p>\n<p><em>cookie</em>\t<br>\n<code>request.getCookies()---cookie.getName()---cookie.getValue()</code></p>\n<p><em>pageContext</em><br>\npageContext 获得其他八大对象，获取当前项目的名称<br>\n<code>$&#123;pageContext.request.contextPath&#125;</code></p>\n<p><strong>EL 执行表达式</strong></p>\n<blockquote>\n<p>内部可以进行运算，只要有结果</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$&#123;<span class=\"number\">1</span>+<span class=\"number\">1</span>&#125;</span><br><span class=\"line\">$&#123;empty user&#125;</span><br><span class=\"line\">$&#123;user==<span class=\"literal\">null</span>?<span class=\"literal\">true</span>:<span class=\"literal\">false</span>&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"jstl\">JSTL<a title=\"#jstl\" href=\"#jstl\"></a></h2>\n<p><strong>什么是JSTL</strong></p>\n<blockquote>\n<p>JSTL（JSP Standard Tag Library)，JSP 标准标签库。可以嵌入在 jsp 页面中使用标签的形式完成业务逻辑等功能，jstl 出现的目的同el一样也是要代替 jsp 页面中的脚本代码。</p>\n</blockquote>\n<p><strong>导包和引入</strong></p>\n<p>使用 jstl 需要先把 jar 包引入工程当中 (jstl-1.2.jar)，然后引入标签库才能够继续使用。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;%@ taglib uri=<span class=\"string\">&quot;http://java.sun.com/jsp/jstl/core&quot;</span> prefix=<span class=\"string\">&quot;c&quot;</span>%&gt;</span><br></pre></td></tr></table></figure>\n<p><strong>if 标签</strong></p>\n<p><code>&lt;c:if test=&quot;$&#123;1==1 &#125;&quot;&gt;</code>满足条件时，中间的内容才会显示出来<code>&lt;/c:if&gt;</code></p>\n<blockquote>\n<p>通过是结合 EL 表达式一起使用，EL 从域中取数据，使用JSTL进行判断或者遍历</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;%request.setAttribute(<span class=\"string\">&quot;money&quot;</span>, <span class=\"number\">3</span>);%&gt;</span><br><span class=\"line\">&lt;c:<span class=\"keyword\">if</span> test=<span class=\"string\">&quot;$&#123;money &gt; 50&#125;&quot;</span>&gt;金额大于：<span class=\"number\">50</span>&lt;/c:<span class=\"keyword\">if</span>&gt;</span><br><span class=\"line\">&lt;c:<span class=\"keyword\">if</span> test=<span class=\"string\">&quot;$&#123;money &lt; 50&#125;&quot;</span>&gt;金额小于：<span class=\"number\">50</span>&lt;/c:<span class=\"keyword\">if</span>&gt;</span><br></pre></td></tr></table></figure>\n<p>做一个 if 标签的使用，<strong>需求：用户登录成功时， 进入首页中，显示用户名。</strong></p>\n<blockquote>\n<p>1.登录成功时，把用户写到 session 域当中。</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//有值</span></span><br><span class=\"line\"><span class=\"keyword\">if</span>(u != <span class=\"literal\">null</span>)&#123;</span><br><span class=\"line\">    response.getWriter().write(<span class=\"string\">&quot;登录成功&quot;</span>);</span><br><span class=\"line\">    <span class=\"comment\">//把用户存在session当中</span></span><br><span class=\"line\">    <span class=\"type\">HttpSession</span> <span class=\"variable\">session</span> <span class=\"operator\">=</span> request.getSeesion();</span><br><span class=\"line\">    session.setAttribute(<span class=\"string\">&quot;user&quot;</span>,u);</span><br><span class=\"line\">    <span class=\"comment\">//跳转到登录</span></span><br><span class=\"line\">    response.setHeader(<span class=\"string\">&quot;refresh&quot;</span>,<span class=\"string\">&quot;3;url=/项目地址/index.jsp&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>2.在首页当中进行判断，从 session 域当中取数据。</p>\n<p>3.通过EL结合JSTL进行判断</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;c:<span class=\"keyword\">if</span> test=<span class=\"string\">&quot;$&#123;empty user&#125;&quot;</span>&gt;</span><br><span class=\"line\">&lt;a href=<span class=\"string\">&quot;Login.jsp&quot;</span>&gt;登录&lt;/a&gt;</span><br><span class=\"line\">&lt;a href=<span class=\"string\">&quot;regist.jsp&quot;</span>&gt;免费注册&lt;/a&gt;</span><br><span class=\"line\">&lt;/c:<span class=\"keyword\">if</span>&gt;</span><br><span class=\"line\">    </span><br><span class=\"line\">&lt;c:<span class=\"keyword\">if</span> test=<span class=\"string\">&quot;$&#123;！empty user&#125;&quot;</span>&gt;</span><br><span class=\"line\">欢迎：$&#123;user.username&#125;</span><br><span class=\"line\">&lt;a href=<span class=\"string\">&quot;#&quot;</span>&gt;退出&lt;/a&gt;</span><br><span class=\"line\">&lt;/c:<span class=\"keyword\">if</span>&gt;</span><br></pre></td></tr></table></figure>\n<p><strong>foreach 标签</strong></p>\n<blockquote>\n<p>普通循环</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!-- 从域当中取数据 自动把数据存储 pageScope --&gt;</span><br><span class=\"line\">&lt;c:forEach begin=<span class=\"string\">&quot;0&quot;</span> end=<span class=\"string\">&quot;5&quot;</span> <span class=\"keyword\">var</span>=<span class=\"string\">&quot;i&quot;</span>&gt;</span><br><span class=\"line\">\t$&#123;i&#125;&lt;br/&gt;</span><br><span class=\"line\">&lt;/c:forEach&gt;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>增加 for 循环</p>\n</blockquote>\n<p>遍历字符串集合</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;%</span><br><span class=\"line\">    list&lt;String&gt; strList = <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;String&gt;();</span><br><span class=\"line\">\tstrList.add(<span class=\"string\">&quot;aaa&quot;</span>);</span><br><span class=\"line\">\tstrList.add(<span class=\"string\">&quot;aaa&quot;</span>);</span><br><span class=\"line\">\tstrList.add(<span class=\"string\">&quot;aaa&quot;</span>);</span><br><span class=\"line\"> %&gt;</span><br><span class=\"line\">   &lt;!--会自动把取出来的值放入到pageScope域当中--&gt;</span><br><span class=\"line\">&lt;c:forEach items=<span class=\"string\">&quot;$&#123;strList&#125;&quot;</span> <span class=\"keyword\">var</span>=<span class=\"string\">&quot;str&quot;</span>&gt;</span><br><span class=\"line\">    $&#123;str&#125;</span><br><span class=\"line\">&lt;/c:forEach&gt;</span><br><span class=\"line\">     </span><br></pre></td></tr></table></figure>\n<p>遍历对象集合</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;%</span><br><span class=\"line\">    list&lt;User&gt; userList = <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;User&gt;();</span><br><span class=\"line\">\t<span class=\"type\">User</span> <span class=\"variable\">u1</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">User</span>();</span><br><span class=\"line\">\tu1.setUsername(<span class=\"string\">&quot;李四&quot;</span>);</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"type\">User</span> <span class=\"variable\">u2</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">User</span>();</span><br><span class=\"line\">\tu2.setUsername(<span class=\"string\">&quot;王五&quot;</span>);</span><br><span class=\"line\">\tuserList.add(u1);</span><br><span class=\"line\">\tuserList.add(u2);</span><br><span class=\"line\">\tsession.setAttribute(<span class=\"string\">&quot;userList&quot;</span>,userList);</span><br><span class=\"line\"> %&gt;</span><br><span class=\"line\">&lt;c:forEach items=<span class=\"string\">&quot;$&#123;userList&#125;&quot;</span> <span class=\"keyword\">var</span>=<span class=\"string\">&quot;user&quot;</span>&gt;</span><br><span class=\"line\">  $&#123;user.username&#125;</span><br><span class=\"line\">&lt;/c:forEach&gt;</span><br></pre></td></tr></table></figure>\n<p>遍历 map</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;%</span><br><span class=\"line\">\tMap&lt;String,String&gt; strMap = <span class=\"keyword\">new</span> <span class=\"title class_\">HashMap</span>&lt;String,String&gt;();</span><br><span class=\"line\">\tstrMap.put(<span class=\"string\">&quot;name&quot;</span>,<span class=\"string\">&quot;李四&quot;</span>);</span><br><span class=\"line\">\tstrMap.put(<span class=\"string\">&quot;age&quot;</span>,<span class=\"string\">&quot;28&quot;</span>);</span><br><span class=\"line\">\tstrMap.put(<span class=\"string\">&quot;addr&quot;</span>,<span class=\"string\">&quot;天津&quot;</span>);</span><br><span class=\"line\">\tsession.setAttribute(<span class=\"string\">&quot;me&quot;</span>,strMap);</span><br><span class=\"line\">%&gt;</span><br><span class=\"line\">&lt;:forEach items=<span class=\"string\">&quot;$&#123;me&#125;&quot;</span> <span class=\"keyword\">var</span>=<span class=\"string\">&quot;entry&quot;</span>&gt;</span><br><span class=\"line\">\t$&#123;entry.key&#125;:$&#123;entry.value&#125;</span><br><span class=\"line\">&lt;/:forEach&gt;</span><br></pre></td></tr></table></figure>\n<hr>\n<p>像是 jstl 的标签库还有很多，这里只介绍了两个标签。</p>\n","prev":{"title":"Spring框架详解","link":"IOC 和 DI 的概述"},"next":{"title":"JSP的基本语法","link":"JSP的基本语法"},"plink":"https://pinkpeachabc.cn/EL与JSTL/","toc":[{"id":"el表达式","title":"EL表达式","index":"1"},{"id":"jstl","title":"JSTL","index":"2"}],"reward":true,"copyright":{"author":"PinkPeach","link":"<a href=\"https://pinkpeachabc.cn/EL与JSTL/\" title=\"EL与JSTL\">https://pinkpeachabc.cn/EL与JSTL/</a>","license":"Attribution-NonCommercial-NoDerivatives 4.0 International (<a href=\"https://creativecommons.org/licenses/by-nc-sa/4.0/\" rel=\"external nofollow noopener\" target=\"_blank\">CC BY-NC-ND 4.0</a>)"}}